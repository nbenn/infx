<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>List and download files — list_files • infx</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="List and download files — list_files" />
<meta property="og:description" content="A dataset in openBIS represents a collection of files. The function
list_files() lists files associated with one or more datasets by
returning a set of FileInfoDssDTO objects. As this object type does not
contain information on data set association, the data set code is saved
as data_set attribute with each FileInfoDssDTO object. Data set files
can be fetched using fetch_files(), which can either retrieve all
associated files or use file path information, for example from
FileInfoDssDTO objects to only download a subset of files." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">infx</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/infx-intro.html">Introduction to infx</a>
    </li>
    <li>
      <a href="../articles/json-class.html">JSON object handling</a>
    </li>
    <li>
      <a href="../articles/openbis-api.html">OpenBIS API coverage</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>List and download files</h1>
    
    <div class="hidden name"><code>list_fetch_files.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A dataset in openBIS represents a collection of files. The function
<code>list_files()</code> lists files associated with one or more datasets by
returning a set of <code>FileInfoDssDTO</code> objects. As this object type does not
contain information on data set association, the data set code is saved
as <code>data_set</code> attribute with each <code>FileInfoDssDTO</code> object. Data set files
can be fetched using <code>fetch_files()</code>, which can either retrieve all
associated files or use file path information, for example from
<code>FileInfoDssDTO</code> objects to only download a subset of files.</p>
    </div>

    <pre class="usage"><span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for DataSet</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for DatasetIdentifier</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetWellReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>,
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for ImageDatasetReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for MicroscopyImageReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for PlateImageReference</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DataSetFileDTO</span>
<span class='fu'>list_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>files</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>n_con</span> <span class='kw'>=</span> <span class='fl'>5L</span>,
  <span class='kw'>reader</span> <span class='kw'>=</span> <span class='no'>identity</span>, <span class='no'>...</span>)

<span class='co'># S3 method for NULL</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>files</span>, <span class='kw'>n_con</span> <span class='kw'>=</span> <span class='fl'>5L</span>,
  <span class='kw'>reader</span> <span class='kw'>=</span> <span class='no'>identity</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DataSet</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetIdentifier</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetWellReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for ImageDatasetReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for MicroscopyImageReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for PlateImageReference</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DataSetFileDTO</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FileInfoDssDTO</span>
<span class='fu'>fetch_files</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>data_sets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>read_mat_files</span>(<span class='no'>data</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>token</th>
      <td><p>Login token as created by <code><a href='login.html'>login_openbis()</a></code>.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object to limit search for datasets/files with.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Generic compatibility. Extra arguments will be passed to
<code><a href='request.html'>make_requests()</a></code> or <code><a href='request.html'>do_requests_serial()</a></code>/<code><a href='request.html'>do_requests_parallel()</a></code>.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>A (vector of) file path(s) to be searched within a dataset.</p></td>
    </tr>
    <tr>
      <th>recursive</th>
      <td><p>A (vector of) logicals, indicating whether to list files
recursively.</p></td>
    </tr>
    <tr>
      <th>files</th>
      <td><p>Optional set of <code>FileInfoDssDTO</code> objects. If NULL, all files
corresponding to the specified datasets are assumed. This file list can be
filtered, by passing a regular expression as <code>file_regex</code> argument via
<code>...</code>.</p></td>
    </tr>
    <tr>
      <th>n_con</th>
      <td><p>The number of simultaneous connections.</p></td>
    </tr>
    <tr>
      <th>reader</th>
      <td><p>A function to read the downloaded data. Is forwarded as
finally argument to <code><a href='request.html'>do_requests_serial()</a></code>/<code><a href='request.html'>do_requests_parallel()</a></code>.</p></td>
    </tr>
    <tr>
      <th>data_sets</th>
      <td><p>Either a single dataset object (anything that has a
<code><a href='dataset_code.html'>dataset_code()</a></code> method) or a set of objects of the same length as <code>x</code>. If
<code>NULL</code> (default), each <code>FileInfoDssDTO</code> object passed as <code>x</code> is expected
to contain a <code>data_set</code> attribute.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>The data to be read.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>list_files()</code> either returns a <code><a href='json_class.html'>json_class</a></code> or a <code><a href='json_vec.html'>json_vec</a></code>
object of subtype <code>FileInfoDssDTO</code>, depending on whether a single or a set
of objects is retrieved. For <code>fetch_files()</code>, the return type depends on the
callback function passed as <code>reader</code> argument. At default, a <code>list</code> is
returned with an entry per file, holding a <code>raw</code> vector of the file data.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data sets for <code>list_files()</code> can be specified as character vector of
dataset codes and therefore all objects for which the internal method
<code><a href='dataset_code.html'>dataset_code()</a></code> exists can be used to select datasets. This includes data
set and data set id objects as well as the various flavors of data set
reference objects. In addition to these dataset-representing objects,
dispatch on <code>DataSetFileDTO</code> objects is possible as well.</p>
<p>File listing can be limited to a certain path within the dataset and the
search can be carried out recursively or non-recursively. In case a set of
objects is passed, the search-tuning arguments <code>path</code> and <code>recursive</code> have
to be either of length 1 or of the same length as <code>x</code>. If dispatch occurs
on <code>DataSetFileDTO</code> objects, the <code>path</code> and <code>recursive</code> arguments are not
needed, as this information is already encoded in the objects passed as <code>x</code>.
A separate API call is necessary for each of the objects the dispatch
occurs on.</p>
<p>The function <code>fetch_files()</code> downloads files associated with a dataset.
In order to identify a file, both a data set code and a file path, relative
to the data set root, are required. <code>fetch_files()</code> can be called in a
variety of ways and internally uses a double dispatch mechanism, first
resolving the data set codes and then calling the non-exported function
<code>fetch_ds_files()</code> which dispatches on file path objects.</p>
<p>Data set code information can either be communicated using any of the
objects understood by <code><a href='dataset_code.html'>dataset_code()</a></code> (including data set, data set id and
data set reference objects) or directly as a character vector, passed as
<code>x</code> argument. In case data set code information is omitted (passed to <code>x</code>
as <code>NULL</code>), the objects encoding file paths have to specify the
corresponding data sets. Furthermore, <code>DataSetFileDTO</code> objects may be
passed as <code>x</code> argument to <code>fetch_files()</code>, which will internally call
<code>fetch_files()</code> again, setting the argument <code>x</code> to <code>NULL</code> and pass the
<code>DataSetFileDTO</code> objects as files argument. Finally, if <code>FileInfoDssDTO</code>
are passed to <code>fetch_files()</code> as <code>x</code> argument, an optional argument
<code>data_sets</code> may be specified (it defaults to <code>NULL</code>) and as above,
<code>fetch_files()</code> is called again with these two arguments rearranged.</p>
<p>The internal generic function <code>fetch_ds_files()</code> can be dispatched on
several objects again. When no files are specified (<code>NULL</code> is passed as
<code>files</code> argument to <code>fetch_files()</code>), all available files for the given
data sets are queried. This list can be filtered using the <code>file_regex()</code>
argument which can be a single regular expression and is applied to file
paths. File paths can be specified as character vector, <code>FileInfoDssDTO</code> or
<code>DataSetFileDTO</code> objects. If dispatch occurs on <code>FileInfoDssDTO</code>, and no
data set code information is available (<code>NULL</code> passed as <code>x</code> or <code>data_sets</code>
argument to <code>fetch_files()</code>) each <code>FileInfoDssDTO</code> must contain a <code>data_set</code>
attribute. Additionally, downloaded files are checked for completeness, as
these objects contain file sizes. If dispatch occurs on <code>DataSetFileDTO</code>
objects or a character vector, this sanity check is not possible.</p>
<p>Files can only be retrieved after previously having created a corresponding
download url using <code><a href='list_urls.html'>list_download_urls()</a></code>, as file urls in openBIS have a
limited lifetime and therefore must be used shortly after being created. A
list of <code>call</code> objects (see <code><a href='https://rdrr.io/r/base/call.html'>base::call()</a></code>) is created and passed to either
<code><a href='request.html'>do_requests_serial()</a></code> or <code><a href='request.html'>do_requests_parallel()</a></code>. Whether file fetching
is carried out in serial or parallel is controlled by the <code>n_con</code> argument.
In case a download fails, it is retried again up to the number of times
specified as <code>n_try</code>. Finally, a function with a single argument can be
passed as the argument <code>done</code>, which takes the downloaded data as input and
does some processing.</p>
<p>A function for reading the binary data retrieved from openBIS can be
supplied to <code>fetch_files()</code> as <code>reader</code> argument. Single cell feature files
as produced by CellProfiler, are stored as Matlab v5.0 <code>.mat</code> files and
the function <code>read_mat_files()</code> reads such files using <code><a href='https://rdrr.io/pkg/R.matlab/man/readMat.html'>R.matlab::readMat()</a></code>
and checks for certain expected attributes and simplifies the read
structure.</p>
<p>The list returned by <code>read_mat_files()</code> is arranged such that each node
corresponds to a single image and contains a list which is either holding a
single value or a vector of values. For a plate with 16 rows, 24 columns
and 3 x 3 imaging sites this will yield a list of length 3456. Index
linearization is in row-major fashion for both wells and sites.
Furthermore, imaging sites come first such that in this example, the first
three list entries correspond to image row 1 (left to right) of well A1,
the next three entries correspond to row 2 of well A1, images 10 through 12
correspond to row 1 of well A2, etc. Well A2 is located in row 1, column 2
of a plate.</p>
    <h2 class="hasAnchor" id="openbis"><a class="anchor" href="#openbis"></a>openBIS</h2>

    

<ul>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/dss/generic/shared/api/v1/IDssServiceRpcGeneric.html'>IDssServiceRpcGeneric:listFilesForDataSet</a></p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other resource listing/downloading functions: <code><a href='list_fetch_images.html'>fetch_images</a></code>,
  <code><a href='list_urls.html'>list_download_urls</a></code>,
  <code><a href='list_fetch_features.html'>list_features</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
  <span class='no'>tok</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='login.html'>login_openbis</a></span>()

  <span class='co'># search for a cell profiler feature data set from plate KB2-03-1I</span>
  <span class='no'>search</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='search_openbis.html'>search_criteria</a></span>(
    <span class='fu'><a href='search_openbis.html'>attribute_clause</a></span>(<span class='st'>"type"</span>, <span class='st'>"HCS_ANALYSIS_CELL_FEATURES_CC_MAT"</span>),
    <span class='kw'>sub_criteria</span> <span class='kw'>=</span> <span class='fu'><a href='search_openbis.html'>search_sub_criteria</a></span>(
      <span class='fu'><a href='search_openbis.html'>search_criteria</a></span>(<span class='fu'><a href='search_openbis.html'>attribute_clause</a></span>(<span class='st'>"code"</span>,
                                       <span class='st'>"/INFECTX_PUBLISHED/KB2-03-1I"</span>)),
      <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"sample"</span>
    )
  )
  <span class='no'>ds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='search_openbis.html'>search_openbis</a></span>(<span class='no'>tok</span>, <span class='no'>search</span>)

  <span class='co'># list all files of this data set</span>
  <span class='no'>all_files</span> <span class='kw'>&lt;-</span> <span class='fu'>list_files</span>(<span class='no'>tok</span>, <span class='no'>ds</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>all_files</span>)</div><div class='output co'>#&gt; [1] 297</div><div class='input'>
  <span class='co'># select some of the files, e.g. all count features per image</span>
  <span class='no'>some_files</span> <span class='kw'>&lt;-</span> <span class='no'>all_files</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span>(<span class='st'>"Image\\.Count_"</span>,
                                <span class='fu'><a href='json_utils.html'>get_field</a></span>(<span class='no'>all_files</span>, <span class='st'>"pathInDataSet"</span>))]
  <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>some_files</span>)</div><div class='output co'>#&gt; [1] 4</div><div class='input'>
  <span class='co'># download the selected files</span>
  <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'>fetch_files</span>(<span class='no'>tok</span>, <span class='no'>some_files</span>)

  <span class='co'># the same can be achieved by passing a file_regex argument to</span>
  <span class='co'># fetch_files(), which internally calls list_files() and filters files</span>
  <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>data</span>, <span class='fu'>fetch_files</span>(<span class='no'>tok</span>, <span class='no'>ds</span>, <span class='kw'>file_regex</span> <span class='kw'>=</span> <span class='st'>"Image\\.Count_"</span>))</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
  <span class='co'># all returned data is raw, the reader argument can be used to supply</span>
  <span class='co'># a function that processes the downloaded data</span>
  <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='no'>data</span>, <span class='no'>class</span>)</div><div class='output co'>#&gt; [1] "raw" "raw" "raw" "raw"</div><div class='input'>  <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'>fetch_files</span>(<span class='no'>tok</span>, <span class='no'>some_files</span>, <span class='kw'>reader</span> <span class='kw'>=</span> <span class='no'>read_mat_files</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='no'>data</span>, <span class='no'>class</span>)</div><div class='output co'>#&gt; [1] "list" "list" "list" "list"</div><div class='input'>
  <span class='fu'><a href='login.html'>logout_openbis</a></span>(<span class='no'>tok</span>)
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#openbis">openBIS</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='mailto:nicolas.bennett@stat.math.ethz.ch'>Nicolas Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '8f9990194a308dca43109e01826929af',
    indexName: 'infx',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


